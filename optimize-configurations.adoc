---
sidebar: sidebar 
permalink: optimize-configurations.html 
keywords: optimize, configuration, storage, compute, application, resiliency assessment, scan, optimization, Microsoft SQL Server, host, instance, FSx for ONTAP 
summary: 数据库工作负载工厂扫描 Microsoft SQL Server 配置，提供见解和建议，帮助您实现卓越运营。 
---
= 在工作负载工厂中实现架构良好的数据库配置
:allow-uri-read: 
:icons: font
:imagesdir: ./media/


[role="lead"]
使用配置分析见解和建议，利用工作负载工厂使用 Microsoft SQL Server 和 Oracle 为您的数据库配置实施最佳实践。您可以轻松查看架构良好的状态，了解数据库配置的问题，并采取措施改进任何未针对可靠性、安全性、效率、性能和成本进行优化的配置。

您还可以忽略不适用于您的环境的特定配置的分析，以避免不必要的警报和不准确的优化结果。

link:optimize-overview.html["了解工作负载工厂中的配置分析和良好架构状态。"]



== 关于此任务

工作负载工厂每日分析数据库配置。每日分析提供精心设计的状态、见解和建议，以及自动修复配置问题的选项，以便您的配置符合最佳实践。

您可以选择查看配置问题的建议并从工作负载工厂控制台内的数据库清单中修复这些问题。

.分析的内容
工作负载工厂分析以下配置的良好架构状态：

对于 Microsoft SQL Server 实例：

* 存储规模估算：包括存储层、文件系统余量、日志驱动器大小和TempDB驱动器大小
* 存储布局：包括用户数据文件放置、日志文件放置和TempDB放置
* 存储配置：包括容量管理、精简配置、分层策略、快照、Microsoft 多路径 I/O (MPIO) 状态和 MPIO 超时设置
* 计算：包括调整大小、操作系统补丁和网络适配器设置，如接收方缩放 (RSS)、TCP 卸载和 MTU 对齐
* 应用程序：包括Microsoft SQL Server许可证、Microsoft SQL Server修补程序和MAXDOP设置
* 弹性：包括本地快照、FSx for ONTAP备份、跨区域复制 (CRR) 和 Microsoft SQL 高可用性。
* 克隆：包括刷新和删除在工作负载工厂内部或外部创建的超过 60 天的克隆（沙盒）的选项


对于 Oracle 数据库：

* 存储配置：包括容量管理、精简配置、分层策略、快照和存储效率




== 开始之前

* 你必须有link:https://docs.netapp.com/us-en/workload-setup-admin/add-credentials.html["AWS 账户凭证和读/写权限"^]分析您的数据库配置。
* 要评估 Microsoft SQL Server 实例或 Oracle 数据库的存储，必须在工作负载工厂中注册资源，并且存储类型必须是 FSx for ONTAP。link:register-instance.html["了解如何注册资源。"]
* 在选择修复设置或配置之前、请确保仔细查看每个建议。对于RSS和MAXDOP设置、我们建议您在更改生产环境之前测试建议的设置以确定性能改进。



NOTE: 修复过程可能会导致实例停机或服务中断。在选择修复配置之前，请务必仔细查看建议。



== 修复配置问题

修复在 FSx for ONTAP存储上运行的 SQL Server 或 Oracle 环境的配置问题。


NOTE: 修复过程可能会导致实例停机或服务中断。在选择修复配置问题之前，请务必仔细查看建议。

.步骤
. 使用其中一个登录link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["控制台体验"^]。
. 在数据库磁贴中，选择*转至数据库清单*。
. 在*Inventory*选项卡中，选择*Instances *选项卡。
. 选择“修复问题”以查看实例的配置问题。
. 在实例的“良好架构状态”页面上，查看分析结果。
+
您可以按类别、子类别、状态、严重性和标签过滤配置问题。

+
您还可以通过选择“导出 PDF”下载调查结果报告。

. 选择下拉箭头可查看任何配置的建议。建议包括最佳实践、未优化配置的潜在缺陷以及重要注意事项。请务必仔细阅读此建议。
. 当选项可用时，选择“查看并修复”配置问题。
+
*全选*是默认设置，但您可以选择特定资源进行修复。

+
.. 对于除克隆清理之外的所有配置，请查看建议详细信息以了解如果选择修复问题会发生什么。某些修复操作可能会导致实例停机或服务中断。
.. 对于克隆清理、请选择要刷新或删除的克隆数据库(沙盒)。
+
*** 刷新克隆会将其与其源数据库同步。刷新仅适用于在工作负载出厂时创建的克隆。
*** 删除克隆将永久删除该克隆、释放存储空间并降低成本。您可以删除在工作负载出厂时和出厂时创建的克隆。




. 选择*继续*以修复配置问题。


.结果
工作负载工厂开始修复问题。选择*作业监控*选项卡以查看操作状态。



== 延迟或取消数据库配置分析

延迟或取消不适用于数据库环境的特定数据库配置分析、以避免不必要的警报和不准确的优化结果。您可以随时重新激活延迟或取消的配置分析。

数据库配置的应用程序要求会有所不同。Workload Factory提供了两个选项、用于跳过对特定数据库配置的分析、以便您只监控相关问题并准确查看相关配置的运行状况。如果推迟或取消特定配置分析、则该配置不会计入优化总分。

您可以在配置级别、SQL Server 实例或 Oracle 数据库级别推迟、解除和重新激活配置分析。

* *推迟30天*：推迟分析将停止分析30天。30天后、分析将自动重新启动。
* *取消*：取消分析会无限期推迟分析。如果需要、您可以重新启动分析。


以下说明描述了如何在配置级别推迟、解除或重新激活分析。要针对特定 SQL Server 实例或 Oracle 数据库完成以下任务，请从 *仪表板* 选项卡开始。

[role="tabbed-block"]
====
.延迟
--
延迟以停止配置分析30天。30天后、分析将自动重新启动。

.步骤
. 使用其中一个登录link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["控制台体验"^]。
. 在数据库磁贴中，选择*转至数据库清单*。
. 在*Inventory*选项卡中，向下滚动到要延迟的配置，选择三点菜单，然后选择*Postpone for 30 days*。
. 选择 * 继续 * 。


.结果
配置分析将停止30天。

--
.取消
--
取消以无限期停止配置分析。您可以根据需要重新启动分析。

.步骤
. 使用其中一个登录link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["控制台体验"^]。
. 在数据库磁贴中，选择*转至数据库清单*。
. 在*Inventory*选项卡中，向下滚动到要取消的配置，选择三点菜单，然后选择*Dismiss*。
. 选择 * 继续 * 。


.结果
配置分析将停止。

--
.重新激活
--
可随时重新激活延迟或取消的配置分析。

.步骤
. 使用其中一个登录link:https://docs.netapp.com/us-en/workload-setup-admin/console-experiences.html["控制台体验"^]。
. 在数据库磁贴中，选择*转至数据库清单*。
. 在*Inventory*选项卡中，向下滚动到要重新激活的配置，选择三点菜单，然后选择*Re再 激活*。
. 选择 * 继续 * 。


.结果
此时将重新激活配置分析、并每天继续执行此分析。

--
====